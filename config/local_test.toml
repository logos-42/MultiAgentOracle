[test_environment]
name = "local_flat_test"
agent_count = 10
simulate_network_latency = true
enable_diap_mock = true  # 使用模拟DIAP身份

[agents]
# 预定义10个扁平化智能体配置（都是预言机节点，无层级）
agent1 = { reputation = 850, stake = "1.0", prompt_type = "analytical" }
agent2 = { reputation = 820, stake = "0.8", prompt_type = "cautious" }
agent3 = { reputation = 650, stake = "0.5", prompt_type = "aggressive" }
agent4 = { reputation = 580, stake = "0.4", prompt_type = "neutral" }
agent5 = { reputation = 520, stake = "0.3", prompt_type = "analytical" }
agent6 = { reputation = 350, stake = "0.2", prompt_type = "cautious" }
agent7 = { reputation = 280, stake = "0.15", prompt_type = "neutral" }
agent8 = { reputation = 220, stake = "0.1", prompt_type = "aggressive" }
agent9 = { reputation = 150, stake = "0.05", prompt_type = "analytical" }
agent10 = { reputation = 80, stake = "0.02", prompt_type = "suspicious" }

[gateways]
light_gateway_count = 2
mobile_gateway_count = 1
enable_gateway_simulation = true

[apis]
diap_sdk_endpoint = "http://localhost:8080/diap"  # 本地DIAP SDK模拟
data_api_mock = true
prompt_support = true

[consensus]
hierarchical_enabled = false  # 改为扁平化架构
zk_verification_enabled = true  # 启用ZK验证
zproof_threshold = 0.85  # ZK证明验证阈值
consensus_threshold = 0.67  # 共识阈值

[network]
max_connections = 10  # 所有智能体平等，无层级限制
simulated_latency_ms = 50
packet_loss_rate = 0.01

[zk_proof]
enabled = true
nori_circuit_path = "circuits/causal_fingerprint.circom"
verification_key_path = "circuits/keys/verification_key.json"
proving_key_path = "circuits/keys/causal_fingerprint.zkey"
num_eigenvalues = 3
scale_factor = 1000000

[testing]
enable_visualization = true
log_level = "debug"
test_duration_seconds = 300
metrics_collection_interval = 10